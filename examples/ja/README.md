# RAPID サンプル例集

このディレクトリには、RAPID（Review & Assessment Powered by Intelligent Documentation）の具体的な使用例が含まれています。各ユースケースには、チェックリストと審査対象書類のサンプルが用意されており、実際の業務での活用方法を理解できます。

## 収録されているユースケース

### ユースケース 001: ハウスメーカー商談（議事録と図面間の整合チェック）

**概要**: ハウスメーカーでの顧客商談において、議事録に記載された顧客要望と建物間取り図が整合しているかを確認するユースケースです。

**含まれるファイル**:

- チェックリスト: 顧客商談議事録（PDF）
- 審査対象書類: 建物間取り図（PNG 画像）

**活用場面**: 顧客の要望が設計図面に正しく反映されているかを効率的に確認し、設計ミスや認識違いを防ぐことができます。

### ユースケース 002: 不動産仲介\_重要事項説明書

**概要**: 不動産仲介業務における重要事項説明書が、業界基準を満たしているかを確認するユースケースです。

**含まれるファイル**:

- チェックリスト: 重要事項説明書\_簡易チェックリスト（PDF）
- 審査対象書類: 記入中\_重説（PDF）

**活用場面**: 重要事項説明書の記載漏れや不備を自動検出し、業務効率を向上させることができます。

### ユースケース 003: 車庫申請

**概要**: 車庫証明申請において、申請書の記載内容が要件を満たしているかを確認するユースケースです。特に、車庫と使用の本拠の位置が 2km 以内という距離要件を、Amazon Location Service を活用して地理的事実に基づいて判定できます。

**含まれるファイル**:

- チェックリスト: チェック項目（PDF）
- 審査対象書類: 申請書例（PDF）

**活用場面**: 車庫証明申請の要件チェックを自動化し、申請書の不備を事前に検出できます。距離要件については MCP（Model Context Protocol）を使用して Amazon Location Service と連携することで、住所から正確な距離計算を行い、必要な情報を提供できます。

**MCP 設定例**:

```json
{
  "awslabs.aws-location-mcp-server": {
    "env": { "FASTMCP_LOG_LEVEL": "ERROR" },
    "args": ["awslabs.aws-location-mcp-server@latest"],
    "command": "uvx"
  }
}
```

### ユースケース 004: 社内稟議（IT 部門）

**概要**: IT 部門での社内稟議書が、社内規定や承認基準を満たしているかを確認するユースケースです。

**含まれるファイル**:

- チェックリスト: 社内稟議書チェックリスト（PDF）
- 審査対象書類: 社内稟議依頼（PDF）

**活用場面**: 稟議書の必要項目の記載確認や承認プロセスの適正性をチェックし、社内ガバナンスの強化と業務効率化を実現できます。

### ユースケース 005: 社内文書（製造部門）

**概要**: 作業手順書などの社内文書が、社内の文書作成要領に従っているかを確認するユースケースです。

**含まれるファイル**:

- チェックリスト: 製造部門作業手順書作成要領（PDF）
- 審査対象書類: 作業手順書（PDF）

**活用場面**: 作業手順書の文書作成要領への準拠性を自動チェックし、安全項目や品質基準の記載漏れを事前に検出することで、文書レビュー業務を効率化できます。

### ユースケース 006:見積書（購買部門）

**概要**: 見積書のような、様々な書式がある文書の記載項目を確認するユースケースです。見積もり料金のコードインタープリタによる検算やナレッジベースと連動したコード体系チェックを体験できます。

**含まれるファイル**:

- チェックリスト: 見積書チェックリスト（PDF）
- 審査対象書類: 見積書（PDF）
- ナレッジベース用ファイル: 見積書に関するルール集（ナレッジ）（txt）

**セットアップ手順**:

この例を使用するには：

1. **Bedrock Knowledge Baseの作成**
   - AWSアカウントでBedrock Knowledge Baseを作成します
   - ナレッジベース用ファイルをアップロードします：
     - `見積書に関するルール集（ナレッジ）.txt`

2. **ツール設定の構成**
   - RAPIDシステムでツール設定を行います
   - 作成したKnowledge Base IDを参照するように設定します
   - コードインタープリタを有効化します

3. **チェックリストのアップロード**
   - `見積書チェックリスト.pdf`をRAPIDにアップロードします

4. **ツール設定の割り当て**
   - チェックリスト作成後、チェックリスト詳細画面でツール設定を各チェック項目に割り当てます
   - これにより、レビュー実行時にナレッジベース検索とコードインタープリタによる計算検証が自動的に行われます

5. **レビューの実行**
   - 審査対象書類（`見積書.pdf`）をアップロードしてレビューを実行します
   - システムが自動的に記載項目の確認と料金の妥当性を検証します

**活用場面**: 見積書の記載項目の網羅性確認や料金計算の妥当性チェックを自動化し、購買業務の効率化とミスの防止を実現できます。ナレッジベースと連動することで、社内の購買ルールや価格基準との整合性も確認できます。

### ユースケース 007: 新薬承認申請レビュー

**概要**: 医薬品規制当局による新薬承認申請書類のICH M4（CTD）形式準拠確認を行うユースケースです。審査ガイドラインをナレッジベースで参照しながらAI審査を実施します。

**含まれるファイル**:

- チェックリスト: 新薬承認申請チェックリスト（PDF）
- 審査対象書類: CTD_2.5_臨床に関する概括評価（PDF）
- ナレッジベース用ファイル:
  - ICH_M4_CTD構成ガイドライン（PDF）
  - 新医薬品承認審査の基本的考え方（PDF）
  - ICH_E3_臨床試験報告書の構造と内容（PDF）
  - 医薬品リスク管理計画（RMP）策定ガイドライン（PDF）

**セットアップ手順**:

この例を使用するには：

1. **Bedrock Knowledge Baseの作成**
   - AWSアカウントでBedrock Knowledge Baseを作成します
   - ナレッジベース用ファイルをアップロードします：
     - `ICH_M4_CTD構成ガイドライン.pdf`
     - `新医薬品承認審査の基本的考え方.pdf`
     - `ICH_E3_臨床試験報告書の構造と内容.pdf`
     - `医薬品リスク管理計画（RMP）策定ガイドライン.pdf`

2. **ツール設定の構成**
   - RAPIDシステムでツール設定を行います
   - 作成したKnowledge Base IDを参照するように設定します

3. **チェックリストのアップロード**
   - `新薬承認申請チェックリスト.pdf`をRAPIDにアップロードします

4. **ツール設定の割り当て**
   - チェックリスト作成後、チェックリスト詳細画面でツール設定を各チェック項目に割り当てます
   - これにより、レビュー実行時にナレッジベース検索が自動的に行われます

5. **レビューの実行**
   - 審査対象書類（`CTD_2.5_臨床に関する概括評価.pdf`）をアップロードしてレビューを実行します
   - システムが自動的にICH M4（CTD）形式への準拠性を検証します

**活用場面**: 新薬承認申請書類の形式準拠性確認や必要項目の記載確認を自動化し、規制当局による審査業務の効率化と品質向上を実現できます。ナレッジベースと連動することで、ICHガイドラインや審査基準との整合性も確認できます。

### ユースケース 008: AWSセキュリティ監査（SI納品前検証）

**概要**: システムインテグレーター（SI）が顧客向けに開発したAWSシステムを納品する前に、セキュリティ設定が要件を満たしているかを検証するユースケースです。開発完了後の最終チェックとして、実際のAWS環境の設定を自動監査し、顧客への引き渡しドキュメントを作成します。

**含まれるファイル**:

- チェックリスト: AWSセキュリティ監査チェックリスト（PDF）
- 審査対象書類: システム納品前セキュリティ検証報告書（PDF）

**活用場面**: SIが複数の顧客AWS環境を管理する際、納品前の最終セキュリティチェックを自動化できます。RDS暗号化、S3設定、IAM MFA等の設定状況を実際のAWS環境から取得し、契約で定められたセキュリティ基準への準拠を検証します。Gateway経由で実環境を監査するため、ドキュメントと実態の乖離を防ぎます。

**重要**: Gateway Lambda は **RAPIDがデプロイされている同一AWSアカウント** 内のリソースを監査します。クロスアカウント設定は不要です。

#### セットアップ手順

このユースケースは専用のMCP Gatewayをデプロイする必要があります。以下の手順で設定してください：

**1. Gateway CDKスタックをデプロイ**

```bash
cd ユースケース008_AWSセキュリティ監査/cdk
npm install
npm run build
npx cdk bootstrap  # 初回のみ
npx cdk deploy AwsSecurityAuditGatewayStack --region ap-northeast-1
```

**Note**: Specify your target region. This example uses `ap-northeast-1` (Tokyo).

デプロイが完了すると、Stack outputsに以下の情報が表示されます：
- **GatewayEndpoint**: Gateway URL
- **McpConfiguration**: Tool Configuration用のJSON（コピーして使用）
- **IamPermissionRequired**: AgentCore Runtimeに必要な権限情報

**2. メインCDKスタックを再デプロイ（権限追加）**

Gateway呼び出し権限が自動的に `cdk/lib/constructs/agent.ts` に追加されています。メインスタックを再デプロイしてください：

```bash
cd ../../../..  # プロジェクトルートに戻る
cd cdk
npm run build
npx cdk deploy RapidStack
```

**3. Tool Configuration設定**

1. RAPID UIでTool Configuration画面を開く
2. 新規作成をクリック
3. Stack outputsの `McpConfiguration` 値をコピーしてMCP Config欄に貼り付け（**Stdio transport format**）：

```json
{
  "aws-security-audit-gateway": {
    "command": "uvx",
    "args": [
      "mcp-proxy-for-aws",
      "https://xxx.gateway.bedrock-agentcore.ap-northeast-1.amazonaws.com/mcp"
    ]
  }
}
```

**Important**: Replace the Gateway URL with your actual Gateway endpoint from stack outputs. The Stdio transport format uses MCP Proxy for AWS to handle IAM authentication (SigV4 signing) automatically.

4. Previewで3つのツールが表示されることを確認：
   - `call_aws` - AWS CLIコマンド実行
   - `suggest_aws_commands` - 自然言語からAWS CLIコマンドを提案
   - `get_execution_plan` - 複雑なAWSタスクのワークフロー生成

**4. チェックリストでの使用**

1. AWSセキュリティ監査チェックリストをアップロード
2. 上記で作成したTool Configurationを選択
3. システム納品前セキュリティ検証報告書をアップロード
4. レビューを実行
5. Gateway Lambda が同一AWSアカウント内のリソースを監査します

詳細は [UC008 Gateway README](./ユースケース008_AWSセキュリティ監査/cdk/README.md) を参照してください。

#### アーキテクチャ

```
Backend/AgentCore → mcp-proxy-for-aws → Gateway (IAM認証) → Lambda → aws-api-mcp-server → AWS APIs
```

**MCP Proxy for AWS**:
- Backend/AgentCoreは標準の`StdioClientTransport`を使用（特別な実装不要）
- MCP Proxyが自動的にSigV4署名を処理（AWS SDK経由）
- IAM認証のため、トークン管理が不要

**Lambda Tool Permissions**:
- **AdministratorAccess** 管理ポリシー（包括的なセキュリティ監査用）
- ⚠️ **セキュリティ警告**: 詳細は [UC008 Gateway README](./ユースケース008_AWSセキュリティ監査/cdk/README.md) の "Security Warning" セクションを参照

**Common Use Cases**:
- RDS暗号化状況、S3設定、IAM MFA
- CloudTrail、VPC Flow Logs、GuardDuty
- その他すべてのAWSサービスのセキュリティ監査

**同一アカウント監査**: Lambda は RAPIDと同じAWSアカウント内のリソースを監査（クロスアカウント設定不要）

参考: https://github.com/awslabs/mcp/tree/main/src/aws-api-mcp-server

#### SI業務での活用例

このユースケースは、SIの以下のような業務シーンで活用できます：

1. **納品前セキュリティ検証** (Primary)
   - 顧客へのシステム納品前に、最終的なセキュリティ要件充足を自動確認
   - 引き渡しドキュメントとして監査レポートを提供

2. **定期SLAコンプライアンス監査**
   - 運用保守SLAで定められたセキュリティ基準の遵守を月次/四半期で証明
   - 前回監査との差分を追跡し、変更管理を実施

3. **インシデント対応後の設定確認**
   - セキュリティインシデント発生後、是正措置が適切に実施されたことを検証
   - インシデントクローズレポートのエビデンスとして使用

4. **マルチアカウント統制監査**
   - 複数の顧客AWSアカウントに対して、同一のセキュリティ基準を一貫して適用
   - アカウント間での設定の不整合を検出

5. **環境引継ぎ時のベースライン評価**
   - 他SIや顧客内製チームからAWS環境の運用を引き継ぐ際、現状のセキュリティ姿勢を評価
   - SLA開始前に必要な是正措置を特定

これらのシーンでは、ドキュメントベースのチェックではなく、**実際のAWS環境の設定値をGateway経由で取得**することで、ドキュメントと実態の乖離を防ぎ、監査の信頼性を高めることができます。


## 使用方法

1. 各ユースケースのディレクトリから、チェックリストと審査対象書類を RAPID システムにアップロードします
2. システムが AI を使用して自動的に書類を分析し、チェックリストとの照合を行います
3. 結果を確認し、必要に応じて人間による最終判断を行います

## 注意事項

- これらのサンプルは学習・検証目的で作成されたものです
- 最終的な判断は必ず適切な資格を持つ専門家が行ってください
