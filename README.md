# Review & Assessment Powered by Intelligent Documentation

このサンプルは生成 AI (Amazon Bedrock) を活用した書類審査ソリューションです。膨大な書類と複雑なチェックリストによる審査業務を、Human in the Loop アプローチで効率化します。チェックリストの構造化から AI による審査、そして人間の最終判断までの一連のプロセスをサポートし、審査時間の短縮と品質向上を実現します。

> [!Important]
> このツールは意思決定支援のみを目的としており、専門的判断や法的助言を提供するものではありません。すべての最終判断は適切な資格を持つ人間の専門家が行う必要があります。

> [!Warning]
> 本サンプルは予告なく破壊的な変更を行う恐れがあります。

## 目次

- [主なユースケース](#主なユースケース)
- [使い方](#使い方)
- [導入方法](#導入方法)
- [詳細情報](#詳細情報)

## 主なユースケース

### 製品仕様書の要件適合レビュー

製品開発における仕様書が、要求仕様や業界標準を満たしているかを効率的に確認します。年間数千件に及ぶ仕様書を、数百の確認項目と照合する作業を自動化。AI が仕様書から関連情報を抽出・構造化し、要件との照合結果を可視化。レビュアーは効率的に最終確認を行えます。

### 技術マニュアルの品質確認

複雑な技術マニュアルが社内ガイドラインや業界標準に準拠しているかを確認します。年間数万ページの技術文書を、数千項目の品質基準と照合する作業を支援。必要な技術情報の記載漏れや矛盾を自動検出し、一貫性のある高品質なマニュアル作成をサポートします。

### 調達文書のコンプライアンス確認

調達文書や提案書が必要な要件を満たしているかをチェックします。数百ページにわたる文書から必要情報を自動抽出し、年間数万件のドキュメントレビューを効率化。要件リストとの照合結果を人間が最終確認することで、調達プロセスのスピードと精度を向上させます。

## 使い方

本サンプル は直感的なウェブインターフェースを通じて、以下の流れで利用できます：

### 1. チェックリストの作成

- 審査基準をチェックリストとして定義
- 親子関係のある階層構造で作成可能
- チェック項目ごとに参照ドキュメントを登録

> **注意**: 実際の画面イメージは実装後に提供されます。画面設計の詳細については [画像プレースホルダー情報](./docs/imgs/image-placeholders.md) を参照してください。

### 2. ドキュメントのアップロード

- 審査対象の書類をアップロード
- PDF など多様な形式に対応
- バッチ処理で複数ドキュメントを一括アップロード可能

### 3. AI による自動審査

- アップロードされた書類を AI が自動で解析
- チェックリストの各項目に対して適合性を評価
- 信頼度スコア付きで結果を表示

### 4. 人による確認とオーバーライド

- AI の評価結果を人がレビュー
- 必要に応じて結果を修正（オーバーライド）
- コメント追加で判断根拠を記録

### 5. 結果のエクスポートと共有

- 審査結果をレポートとして出力
- 関係者と安全に共有
- 監査証跡として保存

## デプロイ手順

### 前提条件

- AWS アカウント
- AWS CLI (設定済み)
- Node.js (v18 以上)

### デプロイ方法

RAPID のデプロイには以下の 2 つの方法があります：

#### 1. CloudShell を使用したデプロイ（簡単に始めたい方向け）

ローカル環境の準備が不要で、AWS CloudShell を使用してブラウザから簡単に直接デプロイできる方法です。

1. **Amazon Bedrock モデルの有効化**

   AWS Management Console から [Bedrock モデルアクセス](https://us-east-1.console.aws.amazon.com/bedrock/home?region=us-east-1#/modelaccess)にアクセスし、必要なモデルへのアクセスを有効化してください。

2. **AWS CloudShell を開く**

   [AWS CloudShell](https://console.aws.amazon.com/cloudshell/home)をデプロイしたいリージョンで開きます。

3. **デプロイスクリプトの実行**

   ```bash
   git clone https://github.com/aws-samples/review-and-assessment-powered-by-intelligent-documentation.git
   cd review-and-assessment-powered-by-intelligent-documentation
   ./bin.sh
   ```

   このスクリプトは、CloudShell を使用して RAPID アプリケーションを自動的にデプロイします。

4. **カスタムパラメータの指定（オプション）**

   ```bash
   ./bin.sh --ipv4-ranges '["192.168.0.0/16"]' --auto-migrate false
   ```

   利用可能なオプション：

   - `--ipv4-ranges`: フロントエンド WAF で許可する IPv4 アドレス範囲（JSON 配列形式）
   - `--ipv6-ranges`: フロントエンド WAF で許可する IPv6 アドレス範囲（JSON 配列形式）
   - `--disable-ipv6`: IPv6 サポートを無効にする
   - `--auto-migrate`: デプロイ時に自動的にデータベースマイグレーションを実行するかどうか
   - `--cdk-json-override`: CDK 設定をオーバーライドするための JSON 文字列
   - `--repo-url`: デプロイするリポジトリの URL
   - `--branch`: デプロイするブランチ名

5. **デプロイ後の確認**

   デプロイが完了すると、フロントエンド URL と API の URL が表示されます。
   表示された URL にアクセスして、アプリケーションを利用開始できます。

> [!Note]
> CloudShell を使用したデプロイでは、Node.js 20 と npm の最新バージョンが自動的に使用されるため、環境構築の手間がありません。

> [!Important]
> このデプロイ方法では、オプションパラメータを設定しない場合、URL を知っている誰でもサインアップできます。本番環境での使用には、IP アドレス制限の追加やセルフサインアップの無効化を強くお勧めします。

#### 2. ローカル環境からのデプロイ（カスタマイズが必要な場合に推奨）

ローカル環境で CDK を使用してデプロイする方法です。、デプロイプロセスをカスタマイズしたい方向けです。詳細な手順については[デプロイガイド](./docs/how_to_deploy.md)を参照してください。

1. **前提条件の確認**

   - Node.js (v18 以上)
   - AWS CLI (設定済み)
   - Docker (macOS でのデプロイ時に必要)

2. **自動化スクリプトを使用したデプロイ**

   ```bash
   # プロジェクトルートディレクトリから実行
   ./deploy.sh
   ```

   このスクリプトは以下の手順を自動的に実行します：

   - 環境のチェック（Docker、AWS CLI）
   - MySQL コンテナの起動（必要な場合）
   - バックエンドの依存関係インストールとビルド
   - マイグレーションファイルの確認と作成
   - CDK による AWS リソースのデプロイ
   - データベースマイグレーションの実行
   - デプロイ情報（フロントエンド URL と API URL）の表示

詳細な手順については[デプロイガイド](./docs/how_to_deploy.md)を参照してください。

### パラメータカスタマイズ

CDK デプロイ時に以下のパラメータをカスタマイズできます:

| パラメータ名             | 説明                                                       | デフォルト値                              |
| ------------------------ | ---------------------------------------------------------- | ----------------------------------------- |
| allowedIpV4AddressRanges | フロントエンド WAF で許可する IPv4 範囲                    | ["0.0.0.0/1", "128.0.0.0/1"] (すべて許可) |
| allowedIpV6AddressRanges | フロントエンド WAF で許可する IPv6 範囲                    | ["0000::/1", "8000::/1"] (すべて許可)     |
| cognitoSelfSignUpEnabled | Cognito User Pool のセルフサインアップを有効にするかどうか | true (有効)                               |
| autoMigrate              | デプロイ時に自動的にマイグレーションを実行するかどうか     | true (自動実行する)                       |

> [!CAUTION]
> 本番環境では、`cognitoSelfSignUpEnabled: false` に設定することでセルフサインアップを無効化することを強く推奨します。セルフサインアップを有効にしたままにすると、誰でもアカウント登録が可能となるため、セキュリティリスクとなる可能性があります。
> デフォルトでは `autoMigrate` パラメータが `true` に設定されており、デプロイ時に自動的にデータベースマイグレーションが実行されます。本番環境や重要なデータを含む環境では、このパラメータを `false` に設定し、マイグレーションを手動で制御することを検討してください。

#### パラメータ指定方法

##### 1. parameter.ts で設定（推奨）

`cdk/lib/parameter.ts` ファイルを直接編集する方法:

```typescript
// cdk/lib/parameter.ts
export const parameters = {
  // カスタマイズしたいパラメータのみコメントを外して設定

  // WAF IP制限の設定例
  allowedIpV4AddressRanges: [
    "192.168.0.0/16", // 内部ネットワーク例
    "203.0.113.0/24", // 特定のパブリックIP範囲例
  ],

  allowedIpV6AddressRanges: [
    "2001:db8::/32", // IPv6アドレス範囲例
  ],

  autoMigrate: false, // 自動マイグレーションを無効化
};
```

##### 2. コマンドラインで context パラメータとして指定

```bash
# ドット表記形式
cdk deploy --context 本サンプル.allowedIpV4AddressRanges='["192.168.0.0/16", "203.0.113.0/24"]'

# または JSON 形式
cdk deploy --context rapid='{"allowedIpV4AddressRanges":["192.168.0.0/16"]}'

# 自動マイグレーションを無効化する例
cdk deploy --context rapid.autoMigrate=false
```

##### 3. CodeBuild デプロイ時にパラメータを指定

```bash
./bin.sh --ipv4-ranges '["192.168.0.0/16"]' --auto-migrate false
```

セキュリティ強化のため、フロントエンドへのアクセスを必要な IP アドレス範囲のみに制限することを強く推奨します。

## 詳細情報

- [デプロイガイド](./docs/how_to_deploy.md): 詳細なデプロイ手順と設定オプション
- [開発者ガイド](./docs/developer-guide.md): 技術仕様、アーキテクチャ、開発環境設定

## Notice

顧客は、このガイダンスに含まれる情報について独自の判断を下す責任があります。このガイダンスは、(a) 情報提供のみを目的としており、(b) AWS の現在の製品提供と慣行を表していますが、これらは予告なく変更される可能性があり、(c) AWS およびその関連会社、サプライヤー、ライセンサーからのいかなるコミットメントや保証も生じません。AWS の製品またはサービスは、明示的か黙示的かを問わず、いかなる保証、表明、または条件もなく「現状のまま」提供されます。AWS の顧客に対する責任と義務は AWS の契約によって管理され、このガイダンスは AWS とその顧客間のいかなる契約の一部でもなく、またいかなる契約も修正しません。

## ライセンス

本プロジェクトは [LICENSE](./LICENSE) に記載されたライセンスの下で配布されています。
